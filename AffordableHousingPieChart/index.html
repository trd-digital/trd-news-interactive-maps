<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Project Cost Breakdown</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
      color: #222;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      padding: 24px 24px 32px;
    }

    h1 {
      font-size: 1.6rem;
      margin-bottom: 0.35rem;
    }

    .subtitle {
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 1.25rem;
    }

    .chart-wrapper {
      position: relative;
      /* This controls the visible height of the chart */
      height: 480px;
    }

    .notes {
      margin-top: 1.5rem;
      font-size: 0.85rem;
      color: #555;
      line-height: 1.4;
    }

    .notes strong {
      font-weight: 600;
    }

    @media (max-width: 600px) {
      .container {
        padding: 16px;
      }
      .chart-wrapper {
        height: 380px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Project Cost Breakdown</h1>
    <div class="subtitle">Interactive pie chart of project cost by category</div>

    <div class="chart-wrapper">
      <canvas id="costChart"></canvas>
    </div>

    <div class="notes">
      <strong>Notes:</strong>
      The “TOTAL PROJECT COST” value is not shown as a separate slice because it is
      the sum of all individual cost categories.
      Hover over each slice to see the dollar amount and percent of total.
    </div>
  </div>

  <script>
    // ---- DATA (from your table, excluding total row) ----
    const labels = [
      "Land Cost / Acquisition Cost",
      "Predevelopment Interest/Land Holding Cost",
      "New Construction Costs",
      "Architectural Costs",
      "Survey & Engineering Costs",
      "Construction Interest & Fees",
      "Permanent Financing Costs",
      "Legal and Consulting Costs",
      "Reserve Costs",
      "Contingency Costs",
      "Other Costs",
      "Developer Costs"
    ];

    const dataValues = [
      5856194,
      150000,
      41724448,
      1850000,
      600000,
      4472310,
      63906,
      145000,
      344088,
      2650403,
      4521134,
      2500000
    ];

    // Helper to format numbers as USD without cents
    function formatCurrency(value) {
      return value.toLocaleString("en-US", {
        style: "currency",
        currency: "USD",
        maximumFractionDigits: 0
      });
    }

    const ctx = document.getElementById("costChart").getContext("2d");

    const totalCost = dataValues.reduce((sum, v) => sum + v, 0);

    const costChart = new Chart(ctx, {
      type: "pie",
      data: {
        labels: labels,
        datasets: [
          {
            data: dataValues,
            // You can tweak these colors as needed
            backgroundColor: [
              "#264653",
              "#2a9d8f",
              "#e9c46a",
              "#f4a261",
              "#e76f51",
              "#6d597a",
              "#b56576",
              "#e56b6f",
              "#355070",
              "#43aa8b",
              "#f3722c",
              "#577590"
            ],
            borderColor: "#ffffff",
            borderWidth: 2
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: "right",
            labels: {
              boxWidth: 16,
              padding: 12,
              font: {
                size: 12
              }
            }
          },
          tooltip: {
            callbacks: {
              label: function (context) {
                const label = context.label || "";
                const value = context.raw || 0;

                // Calculate % of total
                const percentage = ((value / totalCost) * 100).toFixed(1);
                return `${label}: ${formatCurrency(value)} (${percentage}%)`;
              }
            }
          },
          title: {
            display: false
          }
        }
      }
    });
  </script>
</body>
</html>
